ORG 0000H
    SJMP START         ; Jump to main program

; ====== MAIN PROGRAM ======
START:
    CLR P1.0           ; Ensure all LEDs are OFF initially
    CLR P1.1
    CLR P1.2
    CLR P1.3

WAIT_START:
    JNB P2.0, WAIT_START  ; Wait until Start button (P3.2) is pressed

    MOV P1, #00001111b

CHECK_EMERGENCY:
    JB P2.1, EMERGENCY_STOP  ; If Emergency button (P3.5) is pressed, stop immediately
    SJMP CHECK_EMERGENCY      ; Keep checking for Emergency Stop

; ====== EMERGENCY STOP FUNCTION ======
EMERGENCY_STOP:
    CLR P1.0          ; Turn OFF LED 1
    CLR P1.1          ; Turn OFF LED 2
    CLR P1.2          ; Turn OFF LED 3
    CLR P1.3          ; Turn OFF LED 4
    SJMP WAIT_START   ; Go back to waiting for Start button

END


